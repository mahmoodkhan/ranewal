{% load crispy_forms_tags %}

<div id = "feedback_div" class="row">
    <div class="col-md-12">

        <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
            <h4 class="modal-title" id="myModalLabel">Your feedback is welcome!</h4>
            <p class="text-muted">Your feedback is appreciated and it helps make the app more useful. However, it is important to understand that all feedback received goes through a selection/prioritization process and, therefore, may not get implemented in the next release or exactly as requested.</p>
        </div>
        <div class="modal-body">
            {% crispy form %}
        </div>
    </div>
</div>


{% block feedback_extra_js %}
<script type = "text/javascript">

    $('#app_modal_div').on('shown.bs.modal', function (e) {
        $("#id_reporter_role").select2('focus');
    });

    $(document).ready(function() { 
        $("#id_issue_type").select2();
        $("#id_tags").select2();
    });

    $("#feedback_div").on('submit', "#id_feedback_form", function(e) {
        e.preventDefault();
        var form_url = $(this).attr('action');
        var form_data = $(this).serialize();
        $.post(form_url, form_data)
            .done(function(data, textStatus, jqXHR) {
                //console.log(JSON.stringify(data));
                $('#app_modal_div').modal('hide');
            });
    });
</script>
{% endblock feedback_extra_js%}
